{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"(npm run dev|pnpm( run)? dev|yarn dev|bun run dev|python.*runserver|flask run|cargo run|go run|rails server|php artisan serve)\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\ncmd=$(echo \"$input\" | jq -r '.tool_input.command // \"\"')\n\necho '[Hook] BLOCKED: Dev server must run in tmux for log access' >&2\necho '[Hook] Use this command instead:' >&2\necho \"[Hook] tmux new-session -d -s dev '$cmd'\" >&2\necho '[Hook] Then: tmux attach -t dev' >&2\nexit 1"
          }
        ],
        "description": "Block dev servers outside tmux - ensures you can access logs"
      },
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"(npm|pnpm|yarn|bun|pip|poetry|cargo|go |make|docker|pytest|vitest|playwright|jest|rspec|phpunit|gradle|mvn|dotnet)\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nif [ -z \"$TMUX\" ]; then\n  echo '[Hook] Consider running in tmux for session persistence' >&2\n  echo '[Hook] tmux new -s dev  |  tmux attach -t dev' >&2\nfi\necho \"$input\""
          }
        ],
        "description": "Reminder to use tmux for long-running commands"
      },
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"git push\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\necho '[Hook] Review changes before push...' >&2\necho '[Hook] Press Enter to continue with push or Ctrl+C to abort...' >&2\nread -r"
          }
        ],
        "description": "Pause before git push to review changes"
      },
      {
        "matcher": "tool == \"Write\" && tool_input.file_path matches \"\\\\.(md|txt)$\" && !(tool_input.file_path matches \"README\\\\.md|CLAUDE\\\\.md|AGENTS\\\\.md|CONTRIBUTING\\\\.md|CHANGELOG\\\\.md\")",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\n\nif [[ \"$file_path\" =~ \\.(md|txt)$ ]] && [[ ! \"$file_path\" =~ (README|CLAUDE|AGENTS|CONTRIBUTING|CHANGELOG)\\.md$ ]]; then\n  echo \"[Hook] BLOCKED: Unnecessary documentation file creation\" >&2\n  echo \"[Hook] File: $file_path\" >&2\n  echo \"[Hook] Use README.md for documentation instead\" >&2\n  exit 1\nfi\n\necho \"$input\""
          }
        ],
        "description": "Block creation of random .md files - keeps docs consolidated"
      }
    ],
    "PostToolUse": [
      {
        "matcher": "tool == \"Bash\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\ncmd=$(echo \"$input\" | jq -r '.tool_input.command')\n\nif echo \"$cmd\" | grep -qE 'gh pr create'; then\n  output=$(echo \"$input\" | jq -r '.tool_output.output // \"\"')\n  pr_url=$(echo \"$output\" | grep -oE 'https://github.com/[^/]+/[^/]+/pull/[0-9]+')\n  \n  if [ -n \"$pr_url\" ]; then\n    echo \"[Hook] PR created: $pr_url\" >&2\n    repo=$(echo \"$pr_url\" | sed -E 's|https://github.com/([^/]+/[^/]+)/pull/[0-9]+|\\1|')\n    pr_num=$(echo \"$pr_url\" | sed -E 's|.*/pull/([0-9]+)|\\1|')\n    echo \"[Hook] To review PR: gh pr review $pr_num --repo $repo\" >&2\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "Log PR URL and provide review command after PR creation"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx|js|jsx|py|rb|go|rs|java|kt|cs|php|swift|cpp|c|h)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\next=\"${file_path##*.}\"\n\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  # Language-specific formatters\n  case \"$ext\" in\n    ts|tsx|js|jsx)\n      command -v prettier >/dev/null 2>&1 && prettier --write \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n    py)\n      command -v black >/dev/null 2>&1 && black -q \"$file_path\" 2>&1 | head -3 >&2\n      command -v ruff >/dev/null 2>&1 && ruff format \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n    go)\n      command -v gofmt >/dev/null 2>&1 && gofmt -w \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n    rs)\n      command -v rustfmt >/dev/null 2>&1 && rustfmt \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n    rb)\n      command -v rubocop >/dev/null 2>&1 && rubocop -a \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n    java|kt)\n      command -v google-java-format >/dev/null 2>&1 && google-java-format -i \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n    cs)\n      command -v dotnet >/dev/null 2>&1 && dotnet format --include \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n    php)\n      command -v php-cs-fixer >/dev/null 2>&1 && php-cs-fixer fix \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n    swift)\n      command -v swift-format >/dev/null 2>&1 && swift-format format -i \"$file_path\" 2>&1 | head -3 >&2\n      ;;\n  esac\nfi\n\necho \"$input\""
          }
        ],
        "description": "Auto-format code files with language-appropriate formatter"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\n\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  dir=$(dirname \"$file_path\")\n  project_root=\"$dir\"\n  while [ \"$project_root\" != \"/\" ] && [ ! -f \"$project_root/package.json\" ]; do\n    project_root=$(dirname \"$project_root\")\n  done\n  \n  if [ -f \"$project_root/tsconfig.json\" ]; then\n    cd \"$project_root\" && npx tsc --noEmit --pretty false 2>&1 | grep \"$file_path\" | head -10 >&2 || true\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "TypeScript check after editing .ts/.tsx files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(py)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\n\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  # Run type checking if mypy is available\n  if command -v mypy >/dev/null 2>&1; then\n    mypy \"$file_path\" --no-error-summary 2>&1 | head -10 >&2 || true\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "Python type check after editing .py files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(go)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\n\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  dir=$(dirname \"$file_path\")\n  cd \"$dir\" && go vet ./... 2>&1 | head -10 >&2 || true\nfi\n\necho \"$input\""
          }
        ],
        "description": "Go vet check after editing .go files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(rs)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\n\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  dir=$(dirname \"$file_path\")\n  project_root=\"$dir\"\n  while [ \"$project_root\" != \"/\" ] && [ ! -f \"$project_root/Cargo.toml\" ]; do\n    project_root=$(dirname \"$project_root\")\n  done\n  \n  if [ -f \"$project_root/Cargo.toml\" ]; then\n    cd \"$project_root\" && cargo check 2>&1 | head -15 >&2 || true\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "Cargo check after editing .rs files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx|js|jsx|py|rb|go|rs|java|kt|cs|php)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\next=\"${file_path##*.}\"\n\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  # Language-specific debug statement detection\n  case \"$ext\" in\n    ts|tsx|js|jsx)\n      pattern=\"console\\\\.log\"\n      ;;\n    py)\n      pattern=\"print\\\\(\"\n      ;;\n    rb)\n      pattern=\"puts |pp |p \"\n      ;;\n    go)\n      pattern=\"fmt\\\\.Print\"\n      ;;\n    rs)\n      pattern=\"println!|dbg!\"\n      ;;\n    java|kt)\n      pattern=\"System\\\\.out\\\\.print\"\n      ;;\n    cs)\n      pattern=\"Console\\\\.Write\"\n      ;;\n    php)\n      pattern=\"var_dump|print_r|echo \"\n      ;;\n    *)\n      pattern=\"\"\n      ;;\n  esac\n  \n  if [ -n \"$pattern\" ]; then\n    debug_stmts=$(grep -n \"$pattern\" \"$file_path\" 2>/dev/null || true)\n    \n    if [ -n \"$debug_stmts\" ]; then\n      echo \"[Hook] WARNING: Debug statements found in $file_path\" >&2\n      echo \"$debug_stmts\" | head -5 >&2\n      echo \"[Hook] Remove debug statements before committing\" >&2\n    fi\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "Warn about debug statements after edits (language-aware)"
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\n\nif git rev-parse --git-dir > /dev/null 2>&1; then\n  modified_files=$(git diff --name-only HEAD 2>/dev/null || true)\n  \n  if [ -n \"$modified_files\" ]; then\n    has_debug=false\n    while IFS= read -r file; do\n      if [ -f \"$file\" ]; then\n        ext=\"${file##*.}\"\n        case \"$ext\" in\n          ts|tsx|js|jsx) pattern=\"console\\\\.log\" ;;\n          py) pattern=\"print\\\\(\" ;;\n          rb) pattern=\"puts |pp |p \" ;;\n          go) pattern=\"fmt\\\\.Print\" ;;\n          rs) pattern=\"println!|dbg!\" ;;\n          java|kt) pattern=\"System\\\\.out\\\\.print\" ;;\n          cs) pattern=\"Console\\\\.Write\" ;;\n          php) pattern=\"var_dump|print_r\" ;;\n          *) pattern=\"\" ;;\n        esac\n        \n        if [ -n \"$pattern\" ] && grep -q \"$pattern\" \"$file\" 2>/dev/null; then\n          echo \"[Hook] WARNING: Debug statements found in $file\" >&2\n          has_debug=true\n        fi\n      fi\n    done <<< \"$modified_files\"\n    \n    if [ \"$has_debug\" = true ]; then\n      echo \"[Hook] Remove debug statements before committing\" >&2\n    fi\n  fi\nfi\n\necho \"$input\""
          }
        ],
        "description": "Final audit for debug statements in modified files before session ends"
      }
    ]
  }
}
